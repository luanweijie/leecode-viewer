{"java":"public class Solution {\r\n    public int strStr(String haystack, String needle) {\r\n        if(haystack.length() < needle.length()){\r\n            return -1;\r\n        }\r\n        if(needle.length() < 1){\r\n            return 0;\r\n        }\r\n        int[] next = initNext(needle);\r\n        int i,j;\r\n        for(i=0,j=0;i < haystack.length() && j < needle.length() ;i++,j++){\r\n            if(haystack.charAt(i) == needle.charAt(j)) continue;\r\n            j = next[j];\r\n            while(j != -1){\r\n                if(haystack.charAt(i) == needle.charAt(j)){\r\n                    break;\r\n                }\r\n                j = next[j];\r\n            }\r\n        }\r\n        return j == needle.length() ? i - needle.length(): -1;\r\n        \r\n    }\r\n    private int[] initNext(String needle){\r\n        int[] next = new int[needle.length()];\r\n        next[0] = -1;\r\n        if(needle.length() > 1){\r\n            next[1] = 0;\r\n            int last = 0;\r\n            for(int i = 2;i < needle.length(); i++){\r\n                while(last != -1 && needle.charAt(i-1) != needle.charAt(last) ){\r\n                    last = next[last];\r\n                }\r\n                next[i] = last+1;\r\n                last = next[i];\r\n            }\r\n        }\r\n        return next;\r\n    }\r\n}"}