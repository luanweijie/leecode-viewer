{"java":"public class Solution {\r\n    public int candy(int[] ratings) {\r\n        // if(ratings == null) return 0;\r\n        // if(ratings.length < 2) return ratings.length;\r\n        // int[] result = new int[ratings.length];\r\n        // Stack<Integer> st = new Stack<>();\r\n        // st.push(ratings[0]);\r\n        // result[0] = 1;\r\n        // for(int i =1;i < ratings.length;i++){\r\n        //     if(ratings[i] >= st.peek()){\r\n        //         int j = 1;\r\n        //         while(!st.isEmpty()){\r\n        //             st.pop();\r\n        //             if(j > result[i-j]) result[i-j] = j;\r\n        //             j++;\r\n        //         }\r\n        //         st.push(ratings[i]);\r\n        //         result[i] = (ratings[i] == ratings[i-1])?1:result[i-1]+1;\r\n        //     }else{\r\n        //         st.push(ratings[i]);\r\n        //         if(i == ratings.length -1){\r\n        //             int j = 1;\r\n        //             while(!st.isEmpty()){\r\n        //                 st.pop();\r\n        //                 if(j > result[i+1-j]) result[i+1-j] = j;\r\n        //                 j++;\r\n        //             }\r\n        //         }\r\n        //     }\r\n        // }\r\n        if(ratings == null) return 0;\r\n        if(ratings.length < 2) return ratings.length;\r\n        int[] result = new int[ratings.length];\r\n        for(int i = 0;i< ratings.length;i++){\r\n            if(i == ratings.length-1 || ratings[i] <= ratings[i+1]){\r\n                if(i == 0){\r\n                    result[i] = 1;    \r\n                }else if(ratings[i] <= ratings[i-1]){\r\n                    result[i] = 1;    \r\n                    int j = i;\r\n                    while(j > 0 && ratings[j] < ratings[j-1]){\r\n                        result[j-1] = Math.max(result[j]+1,result[j-1]);\r\n                        j--;\r\n                    }\r\n                }else{\r\n                    result[i] = result[i-1]+1;\r\n                }\r\n            }else if(i > 0 && ratings[i] > ratings[i-1]){\r\n                result[i] = result[i-1]+1;\r\n            }\r\n        }\r\n        int totalCount = 0;\r\n        for(int cur : result){\r\n            totalCount += cur;\r\n        }\r\n        return totalCount;\r\n    }\r\n}"}