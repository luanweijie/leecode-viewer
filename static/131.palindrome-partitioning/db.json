{"java":"public class Solution {\r\n    public List<List<String>> partition(String s) {\r\n        ArrayList<List<String>>result = new ArrayList<List<String>>();\r\n        if(s.length() == 0) return result;\r\n        //return _formResult(s,0,s.length()-1,formMatrix(s));\r\n        formResult(s,0,formMatrix(s),new ArrayList<String>(),result);\r\n        return result;\r\n    }\r\n    public void formResult(String s,int start,int[][] matrix,List<String> current,List<List<String>> result){\r\n        if(start == s.length()){\r\n            result.add(new ArrayList<String>(current));\r\n        }else{\r\n            for(int i = s.length()-1;i >= start ;i--){\r\n                if(matrix[start][i] == 1){\r\n                    current.add(s.substring(start,i+1));\r\n                    formResult(s,i+1,matrix,current,result);\r\n                    current.remove(current.size()-1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    public int[][] formMatrix(String s){\r\n        int[][] result = new int[s.length()][];\r\n        for(int i = 0; i < s.length();i++){\r\n            result[i] = new int[s.length()];\r\n            result[i][i] = 1;\r\n            for(int j = i-1;j > -1;j--){\r\n                if(j == i - 1){\r\n                    if(s.charAt(j) == s.charAt(i)) result[j][i] =1;\r\n                }else{\r\n                    if(result[j+1][i-1] ==1){\r\n                        if(s.charAt(j) == s.charAt(i)) result[j][i] =1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    //写得太复杂啦 很多的代码可以在递归的环节省略掉\r\n    //重构一下\r\n    // public List<List<String>> _formResult(String s,int start,int end,int[][] matrix){\r\n    //     ArrayList<List<String>> result = new ArrayList<List<String>>();\r\n    //     if(start > end){\r\n    //         result.add(new ArrayList<>());\r\n    //     }else if(start == end){\r\n    //         ArrayList<String> cur = new ArrayList<String>();\r\n    //         cur.add(s.charAt(start)+\"\");\r\n    //         result.add(cur);\r\n    //     }else{\r\n    //         for(int i = start; i <= end ;i++){\r\n    //             ArrayList<String> front = new ArrayList<String>();\r\n    //             for(int k = start;k < i;k++){\r\n    //                 front.add(s.charAt(k)+\"\");\r\n    //             }\r\n    //             if(i == end){\r\n    //                 front.add(s.substring(end));\r\n    //                 result.add(front);\r\n    //             }\r\n    //             for(int j = end; j > i;j--){\r\n    //                 if(matrix[i][j] == 1){\r\n    //                     ArrayList<String> cur = new ArrayList<>(front);\r\n    //                     cur.add(s.substring(i,j+1));\r\n    //                     List<List<String>> next = formResult(s,j+1,end,matrix);\r\n    //                     for(List<String> ls : next){\r\n    //                         ArrayList<String> cl = new ArrayList<>(cur);\r\n    //                         cl.addAll(ls);\r\n    //                         result.add(cl);\r\n    //                     }\r\n    //                 }\r\n    //             }\r\n    //         }\r\n    //     }\r\n    //     return result;\r\n    // }\r\n}"}